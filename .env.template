# ===============================================================================
# STORM CLOUD SERVER - ENVIRONMENT CONFIGURATION
# ===============================================================================
# This file serves TWO deployment scenarios:
#
# 1. LOCAL DEVELOPMENT (SQLite + runserver):
#    - DJANGO_SETTINGS_MODULE defaults to _core.settings.dev
#    - Keep DATABASE_URL as sqlite:///db.sqlite3
#    - Run: python manage.py runserver
#
# 2. DOCKER DEPLOYMENT (PostgreSQL + gunicorn):
#    - DJANGO_SETTINGS_MODULE set to _core.settings.production (in Dockerfile)
#    - Set POSTGRES_PASSWORD to a strong password
#    - Run: docker compose up -d
#
# See DOCKER.md for Docker setup instructions.
# ===============================================================================

# Django Settings Module (optional - defaults set in manage.py/wsgi.py)
# Leave commented for defaults:
# - manage.py runserver uses: _core.settings.dev
# - gunicorn/Docker uses: _core.settings.production
# DJANGO_SETTINGS_MODULE=_core.settings.dev

# Django Core Settings
# REQUIRED: Change this in production! Generate with:
# python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=your-secret-key-here-change-in-production

# Set to False in production
DEBUG=True

# Comma-separated list of allowed hostnames
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# ===============================================================================
# DOCKER CONFIGURATION
# ===============================================================================
# Project name prefix for containers (optional, default: stormcloud)
COMPOSE_PROJECT_NAME=stormcloud

# Web server port (optional, default: 8000)
WEB_PORT=8000

# Domain for reverse proxy (optional, used with Traefik labels)
# DOMAIN=stormcloud.yourdomain.com

# ===============================================================================
# DATABASE CONFIGURATION
# ===============================================================================
# Local dev uses SQLite (no config needed)
# Docker uses PostgreSQL (set POSTGRES_PASSWORD below)

# PostgreSQL Configuration (Docker only - ignored in local dev)
POSTGRES_DB=stormcloud
POSTGRES_USER=stormcloud
POSTGRES_HOST=db
POSTGRES_PASSWORD=change-this-secure-password

# Email Configuration
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend
# For production SMTP:
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.example.com
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=your-email@example.com
# EMAIL_HOST_PASSWORD=your-password
DEFAULT_FROM_EMAIL=noreply@stormcloud.local

# Storm Cloud Configuration
STORMCLOUD_ALLOW_REGISTRATION=False
STORMCLOUD_REQUIRE_EMAIL_VERIFICATION=True
STORMCLOUD_EMAIL_VERIFICATION_EXPIRY_HOURS=24
STORMCLOUD_MAX_API_KEYS_PER_USER=0

# CORS Configuration (comma-separated list)
# Example: STORMCLOUD_CORS_ORIGINS=https://myapp.com,http://localhost:3000
STORMCLOUD_CORS_ORIGINS=

# Storage Configuration
STORMCLOUD_STORAGE_BACKEND=core.storage.local.LocalStorageBackend
# STORMCLOUD_STORAGE_ROOT defaults to {BASE_DIR}/storage_root

# Rate Limiting (see ADR 007)
# Format: number/period where period can be: second, minute, hour, day
THROTTLE_LOGIN_RATE=5/min
THROTTLE_AUTH_RATE=10/hour
THROTTLE_UPLOAD_RATE=100/hour
THROTTLE_DOWNLOAD_RATE=500/hour
THROTTLE_USER_RATE=1000/hour
THROTTLE_ANON_LOGIN_RATE=10/hour
THROTTLE_ANON_REGISTRATION_RATE=5/hour
